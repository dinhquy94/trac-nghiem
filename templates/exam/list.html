{% extends "base.html" %}

{% block title %}Danh sÃ¡ch Ä‘á» thi{% endblock %}

{% block content %}
<div class="d-flex justify-between align-center mb-3">
    <h1 style="color: white;">ğŸ“ Danh sÃ¡ch Ä‘á» thi</h1>
    {% if session.role == 'teacher' %}
    <a href="{{ url_for('exam.create_exam') }}" class="btn btn-success">â• Táº¡o Ä‘á» thi</a>
    {% endif %}
</div>

<div class="card">
    {% if exams %}
    <div class="grid grid-2">
        {% for exam in exams %}
        <div style="padding: 1.5rem; border: 2px solid #e0e0e0; border-radius: 8px;">
            <div class="d-flex justify-between align-center mb-2">
                <h3 style="color: #333;">{{ exam.title }}</h3>
                {% if exam.is_public %}
                    <span class="badge badge-success">CÃ´ng khai</span>
                {% else %}
                    <span class="badge badge-warning">RiÃªng tÆ°</span>
                {% endif %}
            </div>
            
            <p style="color: #666; margin-bottom: 1rem;">{{ exam.description }}</p>
            
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; margin-bottom: 1rem; font-size: 0.9rem; color: #666;">
                <div>â±ï¸ Thá»i gian: {{ exam.duration }} phÃºt</div>
                <div>ğŸ“„ CÃ¢u há»i: {{ exam.question_count }}</div>
                <div>ğŸ¯ Äiá»ƒm Ä‘áº¡t: {{ exam.passing_score }}%</div>
                <div>ğŸ“Š Tá»•ng Ä‘iá»ƒm: {{ exam.total_points }}</div>
            </div>
            
            <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem; font-size: 0.85rem;">
                <span class="badge badge-success">Dá»…: {{ exam.difficulty_distribution.easy }}</span>
                <span class="badge badge-warning">TB: {{ exam.difficulty_distribution.medium }}</span>
                <span class="badge badge-danger">KhÃ³: {{ exam.difficulty_distribution.hard }}</span>
            </div>
            
            <div class="d-flex gap-1">
                <a href="{{ url_for('exam.view_exam', exam_id=exam._id) }}" class="btn btn-sm btn-primary">Xem</a>
                {% if session.role == 'teacher' and exam.owner_id|string == session.user_id %}
                    <a href="{{ url_for('exam.edit_exam', exam_id=exam._id) }}" class="btn btn-sm btn-secondary">Sá»­a</a>
                {% elif session.role == 'student' and exam.is_public %}
                    <a href="{{ url_for('attempt.start_exam', exam_id=exam._id) }}" class="btn btn-sm btn-success">LÃ m bÃ i</a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 4rem;">
        <p style="color: #666; font-size: 1.2rem; margin-bottom: 1rem;">
            {% if session.role == 'teacher' %}
                ChÆ°a cÃ³ Ä‘á» thi nÃ o
            {% else %}
                ChÆ°a cÃ³ Ä‘á» thi cÃ´ng khai nÃ o
            {% endif %}
        </p>
        {% if session.role == 'teacher' %}
        <a href="{{ url_for('exam.create_exam') }}" class="btn btn-primary">Táº¡o Ä‘á» thi Ä‘áº§u tiÃªn</a>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}
