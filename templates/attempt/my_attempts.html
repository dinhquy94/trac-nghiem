{% extends "base.html" %}

{% block title %}B√†i l√†m c·ªßa t√¥i{% endblock %}

{% block content %}
<h1 style="color: white; margin-bottom: 2rem;">üìö B√†i l√†m c·ªßa t√¥i</h1>

<div class="card">
    {% if attempts %}
    <table class="table">
        <thead>
            <tr>
                <th>ƒê·ªÅ thi</th>
                <th>Th·ªùi gian l√†m</th>
                <th>ƒêi·ªÉm</th>
                <th>K·∫øt qu·∫£</th>
                <th>Tr·∫°ng th√°i</th>
                <th>Thao t√°c</th>
            </tr>
        </thead>
        <tbody>
            {% for item in attempts %}
            <tr>
                <td>
                    <strong>{{ item.exam.title }}</strong><br>
                    <small style="color: #666;">{{ item.exam.question_count }} c√¢u | {{ item.exam.duration }} ph√∫t</small>
                </td>
                <td>{{ item.attempt.created_at|datetime }}</td>
                <td>
                    {% if item.attempt.status == 'graded' %}
                        <strong>{{ item.attempt.percentage }}%</strong><br>
                        <small style="color: #666;">{{ item.attempt.score }}/{{ item.attempt.max_score }}</small>
                    {% else %}
                        <span style="color: #999;">--</span>
                    {% endif %}
                </td>
                <td>
                    {% if item.attempt.status == 'graded' %}
                        {% if item.attempt.passed %}
                            <span class="badge badge-success">‚úì ƒê·∫°t</span>
                        {% else %}
                            <span class="badge badge-danger">‚úó Kh√¥ng ƒë·∫°t</span>
                        {% endif %}
                    {% else %}
                        <span style="color: #999;">--</span>
                    {% endif %}
                </td>
                <td>
                    {% if item.attempt.status == 'graded' %}
                        <span class="badge badge-success">ƒê√£ ch·∫•m</span>
                    {% elif item.attempt.status == 'submitted' %}
                        <span class="badge badge-warning">ƒêang ch·∫•m</span>
                    {% else %}
                        <span class="badge badge-info">ƒêang l√†m</span>
                    {% endif %}
                </td>
                <td>
                    {% if item.attempt.status == 'graded' %}
                        <a href="{{ url_for('attempt.view_result', attempt_id=item.attempt._id) }}" class="btn btn-sm btn-primary">Xem k·∫øt qu·∫£</a>
                    {% elif item.attempt.status == 'in_progress' %}
                        <a href="{{ url_for('attempt.take_exam', attempt_id=item.attempt._id) }}" class="btn btn-sm btn-success">Ti·∫øp t·ª•c</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div style="text-align: center; padding: 4rem;">
        <p style="color: #666; font-size: 1.2rem; margin-bottom: 1rem;">B·∫°n ch∆∞a l√†m b√†i thi n√†o</p>
        <a href="{{ url_for('exam.list_exams') }}" class="btn btn-primary">Xem ƒë·ªÅ thi kh·∫£ d·ª•ng</a>
    </div>
    {% endif %}
</div>
{% endblock %}
